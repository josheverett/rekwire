/* rekwire :: Josh Everett :: MIT License */
!function(){function a(a,b){_rekwire.head.append("<script>"+b+"</script>"),o(a.name)}function b(){var a=Date.now(),b=a-_rekwire.decay;$.each(g(),function(e){var g=d(e);f(e),(a>g||b>g)&&c(e)})}function c(a){s(t+a),s(u+a),s(v+a),s(w+a)}function d(a){return q(v+a)}function e(a){var b=new Date(a.getResponseHeader("Expires")).getTime(),c=a.getResponseHeader("Cache-Control")||"",d=c.match(/\smax-age=(\d+)/i),e=d&&d[1];return isNaN(b)?e?Date.now()+1e3*e:null:b}function f(a){return q(w+a)}function g(){return JSON.parse(q(x))||{}}function h(a){return q(t+a)}function i(a){return q(u+a)}function j(a,b){r(v+a,b)}function k(a){r(x,JSON.stringify(a))}function l(a,b){r(u+a,b)}function m(a,b){r(t+a,b)}function n(a,b,d){var f,h=a.expires||e(d)||_rekwire.expires;return h?(f=g(),f[a.name]=Date.now(),k(f),m(a.name,b),l(a.name,a.path),j(a.name,h),void 0):(c(a.name),void 0)}function o(a){r(w+a,Date.now())}var p=localStorage,q=$.proxy(p.getItem,p),r=$.proxy(p.setItem,p),s=$.proxy(p.removeItem,p),t="rekwire.",u=t+"_path.",v=t+"_expires.",w=t+"_lastUsed.",x=t+"_manifest";_rekwire.head=$(document.head),_rekwire.decay=6048e5,_rekwire.expires=null,_rekwire.clear=function(a){return a?c(a):($.each(g(),c),s(x),void 0)},_rekwire.loadModule=function(b){var c=h(b.name),d=c&&i(b.name);return c&&d==b.path?(a(b,c),$.Deferred().resolve()):$.ajax({url:b.path,dataType:"text",cache:!0}).done(function(c,d,e){n(b,c,e),a(b,c)})},b()}();